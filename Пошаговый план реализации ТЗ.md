Базовая подготовка проекта

Проверить зависимости и окружение: Laravel + PostgreSQL + Filament v3, а также подключаемые пакеты (drafts, medialibrary, sluggable, userstamps, settings, permission, honeypot, Turnstile и др.).

Настроить роли/доступы в Filament (super_admin, admin) и блокировку is_active для пользователей.

Инфраструктура общих требований

Создать общий трейт/базовый класс для контентных моделей: общие поля (title, slug, SEO, publish, userstamps, soft deletes) и правила уникальности slug.

Настроить автоматическую генерацию slug (spatie/laravel-sluggable) и userstamps (wildside/userstamps).

Внедрить oddvalue/laravel-drafts: команды Create/Edit/Discard/Publish/Preview draft для всех контентных сущностей, включая корректную работу m2m связей.

Добавить middleware NoIndexMiddleware и запрет /preview в robots для предпросмотра черновиков (заголовки + meta).

Миграции и модели контентных сущностей

Создать миграции для услуг, товаров, категорий, новостей, портфолио, производственных возможностей с обязательными общими полями и указанными доп. полями/индексами.

Реализовать pivot-таблицы portfolio_project_product и portfolio_project_service с сортировкой и каскадами, обеспечить m2m в моделях.

Спроектировать нормализованные таблицы фильтров каталога (product_attributes, product_attribute_values, product_category_attribute, product_attribute_value_product) или альтернативный jsonb-вариант, с приоритетом нормализованной схемы.

Модуль меню

Создать таблицы menus и menu_items с поддержкой вложенности, разных типов ссылок (url/route/model), видимости и сортировки; добавить индексы и soft delete при необходимости.

Построить Filament-ресурсы для управления меню, включая выбор сущностей для model-ссылок.

Модуль форм

Миграции: forms, form_fields, form_submissions, form_submission_files (MediaLibrary для файлов).

Логика: настройка anti-spam (Turnstile, honeypot, rate-limit по IP/форме), обработка файлов, webhook/email-уведомления, статусы заявок и логи отправки.

Filament: ресурс Forms с вложенным менеджером Fields; ресурс Submissions с фильтрами, статусами, просмотром payload/meta и действиями (spam, экспорт, soft delete/restore).

Settings и статические страницы

Настроить spatie/laravel-settings для контактов, блока “О нас”, логотипа/фавикона и базовых SEO; без черновиков, но с валидацией.

Интегрировать Fabricator для страницы home с возможностью черновиков/предпросмотра и конфигурируемыми блоками.

Админ-панель Filament

Для всех сущностей: таблицы с колонками title/slug/publish/meta, фильтры (published, trashed, drafts), bulk actions Publish/Unpublish/Restore/Delete.

Формы: секции SEO, контент, медиа (обязательные alt/title), publish блок, метаданные readonly.

Добавить Action Preview в ресурсах для открытия предпросмотра (только для админов).

Медиа и валидации

Интегрировать Spatie MediaLibrary + Filament плагин: обязательные custom_properties alt/title, запрет сохранения без них.

Серверные валидации для форм и CRUD (Filament + Form Requests), включая публикацию и статусы.

Разрешения и безопасность

Настроить spatie/laravel-permission для granular действий (publish/unpublish, force delete только super_admin).

Ограничить доступ к предпросмотру и исключить его из sitemap; подготовить middleware/guards для Filament routes.

Тестирование и контроль качества

Покрыть миграции/модели/ресурсы тестами: публикация/черновики, медиапроверки alt/title, формы (anti-spam, rate limit, уведомления), меню и фильтры каталога.

Проверить индексы/FK/уникальности и политику каскадов (*_by SET NULL, pivot CASCADE).
